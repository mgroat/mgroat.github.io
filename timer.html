<script   src="https://code.jquery.com/jquery-2.2.2.min.js"   integrity="sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI="   crossorigin="anonymous"></script>
<script>
//http://stackoverflow.com/questions/20618355/the-simplest-possible-javascript-countdown-timer
function startTimer(timerSetup) {
    var i = 0;
	//timerSetup[i] = [seconds, activity, sound object]
	var timer =timerSetup[i][0];
	switchTask(timerSetup[i]);
	
    setInterval(function () {
        var minutes = parseInt(timer / 60, 10);
        var seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        $("#time").text(minutes + ":" + seconds);
		document.title=minutes + " " + timerSetup[i][1];

        if (--timer < 0) {
			i++;
			if (i >= timerSetup.length) {
				i = 0;
			}
            timer = timerSetup[i][0];
			switchTask(timerSetup[i]);
		}
    }, 1000);
}

function switchTask(taskInfo) {
	$("#activity").text(taskInfo[1]);
	document.title=taskInfo[1];
	taskInfo[2].play();

	//http://stackoverflow.com/questions/29525331/how-to-set-a-closing-time-for-notification-extension-chrome
	if (Notification.permission !== "granted"){
		Notification.requestPermission();}
	else {
		var notification = new Notification("Time to " + taskInfo[1]);
		setTimeout(function(){notification.close()},2000);
	}
}

window.onload = function () {
	var work = new Audio("http://freesound.org/data/previews/193/193170_3012047-lq.mp3");
	var rest = new Audio("http://freesound.org/data/previews/196/196106_2271450-lq.mp3");
    startTimer([[25*60,"Focus",work],[5*60,"Stretch",rest]]);
};
</script>
<h1 id='activity'></h1>
<h2 id='time'></h2>
<p>
This page uses Creative Commons licenced sounds from http://freesound.org/ users netaj and  Aiwha